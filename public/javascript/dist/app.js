!function e(t,n,r){function i(o,u){if(!n[o]){if(!t[o]){var c="function"==typeof require&&require;if(!u&&c)return c(o,!0);if(s)return s(o,!0);var a=new Error("Cannot find module '"+o+"'");throw a.code="MODULE_NOT_FOUND",a}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return i(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var s="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e){var t=e("./dominode/page"),n=(e("./dominode/layout"),e("./layouts/header-content-footer")),r=e("./schemas/headline"),i=e("./schemas/link"),s=e("./schemas/footer");t.useLayout(n).register([r,i,s]).prepend("headline",document.querySelector("#main-header")).append("link",document.querySelector("#main-content")).append("footer",document.querySelector("#main-footer")).bond("link","headline","function")},{"./dominode/layout":2,"./dominode/page":4,"./layouts/header-content-footer":8,"./schemas/footer":9,"./schemas/headline":10,"./schemas/link":11}],2:[function(e,t){var n=function(){"use strict";this.sections={}};n.prototype.generate=function(e){"use strict";var t=this,n=document.querySelector("body");e.reverse().forEach(function(e){var r=Object.getOwnPropertyNames(e)[0],i=e[r];t.sections[r]=e[r];var s=document.createElement(i.element);if(i.attributes)for(var o in i.attributes)s.setAttribute(o,i.attributes[o]);n.insertBefore(s,n.firstChild)})},t.exports=new n},{}],3:[function(e,t){var n=e("util"),r=e("events"),i=e("../helpers/ajax"),s=function(e){"use strict";r.EventEmitter.call(this),this.scheme=e};n.inherits(s,r.EventEmitter),s.prototype.refresh=function(){"use strict";return this.scheme.element.innerHTML=this.scheme.content,this},s.prototype.fetch=function(e){"use strict";var t=this,n=e||t.scheme.url,r=i.makePromise(n).then(function(e){return t.update(e),e},function(e){console.log("REJECTED",e)});return r},s.prototype.update=function(e){"use strict";var t=JSON.parse(e);for(var n in t)this.scheme[n]=t[n];this.emit("updated",this)},t.exports=s},{"../helpers/ajax":6,events:12,util:16}],4:[function(e,t){var n=e("./model"),r=e("./layout"),i=function(){"use strict";this.elements={},this.layout=r},s=function(e,t){"use strict";if("undefined"!=typeof t)for(var n in t)e.setAttribute(n,t[n]);return e},o=function(e){"use strict";var t=this,n=document.createElement(e.scheme.element);s(n,e.scheme.attributes),n.innerHTML=e.scheme.content,e.scheme.event&&n.addEventListener(e.scheme.event,function(n){e.scheme.callback.call(e,n,t)}),e.scheme.element=n,t.elements[e.scheme.name]=e,e.on("updated",function(){this.refresh(e.scheme.name)}.bind(e))};i.prototype.register=function(e){"use strict";var t=this;return e.forEach(function(e){var r=new n(e);o.call(t,r)}.bind(t)),t},i.prototype.useLayout=function(e){return this.layout.generate(e),this},i.prototype.redirect=function(e){"use strict";window.location.href=e},i.prototype.getElement=function(e){"use strict";return this.elements[e]},i.prototype.destroy=function(e){"use strict";var t=this.getElement(e).element;return t.parentNode.removeChild(t),delete this.elements[e],this},i.prototype.append=function(e,t){"use strict";var n=t||document.querySelector("body");return n.appendChild(this.getElement(e).scheme.element),this},i.prototype.prepend=function(e,t){"use strict";var n=t||document.querySelector("body");return n.insertBefore(this.getElement(e).scheme.element,n.firstChild),this},i.prototype.bond=function(e,t,n){"use strict";var r=this;return"function"===n?(r.getElement(t).scheme.callback.bind(r.getElement(e)),r.getElement(e).scheme.element.addEventListener(r.getElement(e).scheme.event,function(n){r.getElement(e).scheme.callback.call(r.getElement(t),n,r)}),console.log(r.getElement(e).scheme.element)):"event"===n?r.getElement(e).scheme.element.addEventListener(r.getElement(t).scheme.event,function(e){r.getElement(t).scheme.callback.call(r.getElement(t),e,r)}):r.getElement(e).scheme.element.addEventListener(r.getElement(t).scheme.event,function(e){r.getElement(t).scheme.callback.call(r.getElement(t),e,r)}),r},t.exports=new i},{"./layout":2,"./model":3}],5:[function(e,t){var n=e("events"),r=e("util"),i=e("../helpers/pushpop")(window),s=function(){"use strict";this.state=i,n.EventEmitter.call(this)};r.inherits(s,n.EventEmitter),s.prototype.directTo=function(e,t){"use strict";this.state.push(e,t),this.emit(e,t)},t.exports=new s},{"../helpers/pushpop":7,events:12,util:16}],6:[function(e,t,n){n.makePromise=function(e){"use strict";return new Promise(function(t,n){var r=new XMLHttpRequest;r.open("POST",e),r.setRequestHeader("Content-Type","application/json"),r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.onload=function(){200===r.status?t(r.response):n(r.response)},r.onerror=function(){n(r.response)},r.send()})}},{}],7:[function(e,t){var n=function(e){"use strict";this.window=e,this.history=this.window.history,this.hasPopState="undefined"!=typeof this.window.onpopstate,this.checkCompatability=function(e,t,n){this.hasPopState?this.history[e+"State"]({url:t,data:n},"",t):this.window.location=t}};n.prototype.push=function(e,t){"use strict";this.checkCompatability("push",e,t)},n.prototype.replace=function(e,t){"use strict";this.checkCompatability("replace",e,t)},n.prototype.getState=function(e){"use strict";return this.hasPopState?e?e(this.history.state):this.history.state:!1},n.prototype.watchState=function(e){"use strict";return this.hasPopState?void(this.window.onpopstate=e):!1},t.exports=function(e){"use strict";return new n(e)}},{}],8:[function(e,t){t.exports=[{header:{element:"div",attributes:{"class":"main-header",id:"main-header"}}},{content:{element:"div",attributes:{id:"main-content"}}},{footer:{element:"div",attributes:{"class":"footer",id:"main-footer"}}}]},{}],9:[function(e,t){t.exports={name:"footer",element:"div",attributes:{"class":"footer-info"},content:"this is the footer"}},{}],10:[function(e,t){t.exports={name:"headline",element:"div",attributes:{"class":"testing","data-bind":"other"},content:"<h1>Hello World</h1>",url:"/github/dominode/public/javascript/data.json",event:"click",callback:function(){"use strict";this.fetch()}}},{}],11:[function(e,t){var n=e("../dominode/router");t.exports={name:"link",element:"a",attributes:{href:"new/path"},content:"click me",event:"click",callback:function(e){"use strict";e.preventDefault();var t={content:"new content"};n.directTo(this.scheme.attributes.href,t),this.update(JSON.stringify(t))}}},{"../dominode/router":5}],12:[function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function i(e){return"number"==typeof e}function s(e){return"object"==typeof e&&null!==e}function o(e){return void 0===e}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!i(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,i,u,c,a;if(this._events||(this._events={}),"error"===e&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],o(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(i=arguments.length,u=new Array(i-1),c=1;i>c;c++)u[c-1]=arguments[c];n.apply(this,u)}else if(s(n)){for(i=arguments.length,u=new Array(i-1),c=1;i>c;c++)u[c-1]=arguments[c];for(a=n.slice(),i=a.length,c=0;i>c;c++)a[c].apply(this,u)}return!0},n.prototype.addListener=function(e,t){var i;if(!r(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?s(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,s(this._events[e])&&!this._events[e].warned){var i;i=o(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),i||(i=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var i=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,i,o,u;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],o=n.length,i=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(s(n)){for(u=o;u-->0;)if(n[u]===t||n[u].listener&&n[u].listener===t){i=u;break}if(0>i)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],r(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?r(e._events[t])?1:e._events[t].length:0}},{}],13:[function(e,t){t.exports="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],14:[function(e,t){function n(){}var r=t.exports={};r.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.MutationObserver,n="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};var r=[];if(t){var i=document.createElement("div"),s=new MutationObserver(function(){var e=r.slice();r.length=0,e.forEach(function(e){e()})});return s.observe(i,{attributes:!0}),function(e){r.length||i.setAttribute("yes","no"),r.push(e)}}return n?(window.addEventListener("message",function(e){var t=e.source;if((t===window||null===t)&&"process-tick"===e.data&&(e.stopPropagation(),r.length>0)){var n=r.shift();n()}},!0),function(e){r.push(e),window.postMessage("process-tick","*")}):function(e){setTimeout(e,0)}}(),r.title="browser",r.browser=!0,r.env={},r.argv=[],r.on=n,r.addListener=n,r.once=n,r.off=n,r.removeListener=n,r.removeAllListeners=n,r.emit=n,r.binding=function(){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(){throw new Error("process.chdir is not supported")}},{}],15:[function(e,t){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],16:[function(e,t,n){(function(t,r){function i(e,t){var r={seen:[],stylize:o};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),m(t)?r.showHidden=t:t&&n._extend(r,t),E(r.showHidden)&&(r.showHidden=!1),E(r.depth)&&(r.depth=2),E(r.colors)&&(r.colors=!1),E(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=s),c(r,e,r.depth)}function s(e,t){var n=i.styles[t];return n?"["+i.colors[n][0]+"m"+e+"["+i.colors[n][1]+"m":e}function o(e){return e}function u(e){var t={};return e.forEach(function(e){t[e]=!0}),t}function c(e,t,r){if(e.customInspect&&t&&O(t.inspect)&&t.inspect!==n.inspect&&(!t.constructor||t.constructor.prototype!==t)){var i=t.inspect(r,e);return b(i)||(i=c(e,i,r)),i}var s=a(e,t);if(s)return s;var o=Object.keys(t),m=u(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(t)),S(t)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return l(t);if(0===o.length){if(O(t)){var v=t.name?": "+t.name:"";return e.stylize("[Function"+v+"]","special")}if(_(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(L(t))return e.stylize(Date.prototype.toString.call(t),"date");if(S(t))return l(t)}var y="",g=!1,w=["{","}"];if(d(t)&&(g=!0,w=["[","]"]),O(t)){var E=t.name?": "+t.name:"";y=" [Function"+E+"]"}if(_(t)&&(y=" "+RegExp.prototype.toString.call(t)),L(t)&&(y=" "+Date.prototype.toUTCString.call(t)),S(t)&&(y=" "+l(t)),0===o.length&&(!g||0==t.length))return w[0]+y+w[1];if(0>r)return _(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var x;return x=g?f(e,t,r,m,o):o.map(function(n){return p(e,t,r,m,n,g)}),e.seen.pop(),h(x,y,w)}function a(e,t){if(E(t))return e.stylize("undefined","undefined");if(b(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return g(t)?e.stylize(""+t,"number"):m(t)?e.stylize(""+t,"boolean"):v(t)?e.stylize("null","null"):void 0}function l(e){return"["+Error.prototype.toString.call(e)+"]"}function f(e,t,n,r,i){for(var s=[],o=0,u=t.length;u>o;++o)s.push(D(t,String(o))?p(e,t,n,r,String(o),!0):"");return i.forEach(function(i){i.match(/^\d+$/)||s.push(p(e,t,n,r,i,!0))}),s}function p(e,t,n,r,i,s){var o,u,a;if(a=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},a.get?u=a.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):a.set&&(u=e.stylize("[Setter]","special")),D(r,i)||(o="["+i+"]"),u||(e.seen.indexOf(a.value)<0?(u=v(n)?c(e,a.value,null):c(e,a.value,n-1),u.indexOf("\n")>-1&&(u=s?u.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+u.split("\n").map(function(e){return"   "+e}).join("\n"))):u=e.stylize("[Circular]","special")),E(o)){if(s&&i.match(/^\d+$/))return u;o=JSON.stringify(""+i),o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+u}function h(e,t,n){var r=0,i=e.reduce(function(e,t){return r++,t.indexOf("\n")>=0&&r++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function d(e){return Array.isArray(e)}function m(e){return"boolean"==typeof e}function v(e){return null===e}function y(e){return null==e}function g(e){return"number"==typeof e}function b(e){return"string"==typeof e}function w(e){return"symbol"==typeof e}function E(e){return void 0===e}function _(e){return x(e)&&"[object RegExp]"===k(e)}function x(e){return"object"==typeof e&&null!==e}function L(e){return x(e)&&"[object Date]"===k(e)}function S(e){return x(e)&&("[object Error]"===k(e)||e instanceof Error)}function O(e){return"function"==typeof e}function j(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function k(e){return Object.prototype.toString.call(e)}function z(e){return 10>e?"0"+e.toString(10):e.toString(10)}function N(){var e=new Date,t=[z(e.getHours()),z(e.getMinutes()),z(e.getSeconds())].join(":");return[e.getDate(),q[e.getMonth()],t].join(" ")}function D(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var M=/%[sdj%]/g;n.format=function(e){if(!b(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(i(arguments[n]));return t.join(" ")}for(var n=1,r=arguments,s=r.length,o=String(e).replace(M,function(e){if("%%"===e)return"%";if(n>=s)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return e}}),u=r[n];s>n;u=r[++n])o+=v(u)||!x(u)?" "+u:" "+i(u);return o},n.deprecate=function(e,i){function s(){if(!o){if(t.throwDeprecation)throw new Error(i);t.traceDeprecation?console.trace(i):console.error(i),o=!0}return e.apply(this,arguments)}if(E(r.process))return function(){return n.deprecate(e,i).apply(this,arguments)};if(t.noDeprecation===!0)return e;var o=!1;return s};var A,T={};n.debuglog=function(e){if(E(A)&&(A=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!T[e])if(new RegExp("\\b"+e+"\\b","i").test(A)){var r=t.pid;T[e]=function(){var t=n.format.apply(n,arguments);console.error("%s %d: %s",e,r,t)}}else T[e]=function(){};return T[e]},n.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=d,n.isBoolean=m,n.isNull=v,n.isNullOrUndefined=y,n.isNumber=g,n.isString=b,n.isSymbol=w,n.isUndefined=E,n.isRegExp=_,n.isObject=x,n.isDate=L,n.isError=S,n.isFunction=O,n.isPrimitive=j,n.isBuffer=e("./support/isBuffer");var q=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",N(),n.format.apply(n,arguments))},n.inherits=e("inherits"),n._extend=function(e,t){if(!t||!x(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":15,_process:14,inherits:13}]},{},[1]);